<ul>
  <li class="result" ng-class="{'active-result': dash.manager.activeResult === p.photo.id}"
  ng-repeat="p in dash.manager.photos track by $index"
  ng-mouseenter="dash.manager.activeResult = p.photo.id"
  ng-mouseleave="dash.manager.activeResult = null"
  >
    <div class="result-thumb-wrapper">
      <div class="result-thumb-dummy"></div>
      <div class="result-thumb" ng-style="{'background-image': 'url('+p.photo.px_image+')'}" ng-mouseenter="dash.manager.activeResult = p.photo.id">

        <a class="px-link" ng-href="https://www.500px.com{{p.photo.px_link}}" target="_blank"><%= image_tag 'spacer.png' %></a>
        
        <div class="palette" ng-mouseleave="p.active = null">
          <div class="palette-colour-label" ng-class="{white: p.active.lab.l <= 69, black: p.active.lab.l > 69}"
          ng-show="p.active" ng-style="{'background-color': 'rgb('+p.active.rgb.r+','+p.active.rgb.g+','+p.active.rgb.b+')'}">
            <h4>{{p.active.label}}</h4>
            <h6>#{{p.active.hex}}</h6>
          </div>
          <ul ng-style="{'background-color': '#'+p.palette[p.palette.length-1].hex}">
            <li class="palette-colour" ng-repeat="item in p.palette" 
              ng-style="{'background-color': '#'+item.hex}"
              ng-mouseenter="p.active = item"
              
            ></li>
          </ul>
        </div>        
      </div>
    </div>

    
    <div class="result-info" ng-show="dash.manager.activeResult === p.photo.id" >
      <h4>{{p.photo.px_name}}</h4>
      <h6>
        By <a ng-href="https://www.500px.com/{{p.photo.px_user.username}}" target="_blank">{{p.photo.px_user.username}}</a>
      </h6>
      <p ng-show="p.photo.px_description">{{p.photo.px_description | stripHtml | limitTo:90}}</p>
      <div class="attribution">Â© {{p.photo.px_user.firstname | capitalize}} {{p.photo.px_user.lastname | capitalize}} / 500px</div>
    </div>
  </li>
</ul>